---

# 1. 画面名

---

**シフト提出状況確認画面（スタッフ用）**

![image.png](image.png)

---

# 2. 要素別仕様

---

## 2-1. スタッフヘッダー・ナビゲーション

![image.png](image%201.png)

### UI 要素・コントロール・I/O

| 要素名         | コントロール種類 | I/O | 説明                                 |
|----------------|------------------|-----|--------------------------------------|
| スタッフ名表示 | テキスト表示     | 出力| ログイン中のスタッフ名を表示（常時表示。スマホ・タブレットでも省略表示で表示される） |
| 年月セレクタ   | セレクトボックス | 入力| 確認対象の年月を選択                 |
| ダッシュボード | ボタン           | 入力| ダッシュボード画面へ遷移             |
| ログアウトボタン| アイコンボタン   | 入力| ログアウト処理（押下時に確認ダイアログ表示。「このアカウントからログアウトしますか？」と中央揃え・横幅いっぱいのダイアログで確認。キャンセル・ログアウトの2ボタンも中央揃え） |

### イベント定義

| イベント名         | 発生タイミング | イベント概要               | 遷移先 | バリデーション |
|--------------------|---------------|----------------------------|--------|----------------|
| 年月変更           | 選択時         | 表示データの更新           | なし   | なし           |
| ダッシュボード遷移 | クリック時     | ダッシュボード画面へ遷移   | /staff/dashboard | なし |
| ログアウト実行     | クリック時     | ログアウト確認ダイアログ表示→OK時にLocalStorage削除・ログアウト | /staff/login | なし |

---

## 2-2. シフト提出状況一覧（カード形式）

![image.png](image%202.png)

### UI 要素・コントロール・I/O

| 要素名         | コントロール種類 | I/O | 説明                                 |
|----------------|------------------|-----|--------------------------------------|
| シフトカード   | カード（Paper）   | 入力| 各日のシフト情報を表示するカード     |
| 日付・曜日表示 | テキスト表示     | 出力| 「○日(○)」形式で表示               |
| 希望ステータス | 記号表示         | 出力| スタッフが希望した○×△を色分け表示    |
| 確定ステータス | チップ（Chip）   | 出力| 確定/休み/現場未確定/詳細未確定をチップで色分け表示 |
| 稼働場所       | テキスト表示     | 出力| 確定時の稼働場所を「▶」付きで表示    |
| 稼働時間       | テキスト表示     | 出力| 開始・終了時間を「時間:」ラベル付きで表示 |
| 詳細表示案内   | テキスト表示     | 出力| 「＞詳細」の案内表示（確定時のみ）   |
| カード背景色   | 背景色           | 出力| ステータス・稼働確約日に応じた背景色 |
| ホバー効果     | インタラクション | 出力| 確定時のみホバー効果・影・移動アニメーション |

### イベント定義

| イベント名         | 発生タイミング | イベント概要               | 遷移先 | バリデーション |
|--------------------|---------------|----------------------------|--------|----------------|
| 詳細表示           | カードクリック時| 稼働詳細ドロワー表示（確定時のみクリック可能） | WorkDetailDrawer表示 | ステータスが「確定」のみ |

---

## 2-3. 稼働詳細ドロワー（WorkDetailDrawer）

![image.png](image%203.png)

### UI 要素・コントロール・I/O

| 要素名         | コントロール種類 | I/O | 説明                                 |
|----------------|------------------|-----|--------------------------------------|
| 稼働日時表示   | テキスト表示     | 出力| 稼働日・曜日・時間を表示             |
| 希望ステータス表示| バッジ         | 出力| スタッフが希望した○×△を表示          |
| 確定ステータス表示| バッジ         | 出力| 確定/現場未確定/休み等のステータス   |
| 代理店情報     | 情報パネル       | 出力| 代理店名・担当者・連絡先を表示       |
| 稼働場所情報   | 情報パネル       | 出力| 稼働場所・集合時間・集合場所を表示   |
| 服装・注意事項 | 情報パネル       | 出力| 制服・服装・特記事項を表示           |
| 管理者情報     | 情報パネル       | 出力| 現場管理者・連絡先を表示             |
| 日当・時間     | 情報パネル       | 出力| 日当・稼働時間の詳細を表示           |
| 他社スタッフ情報| 情報パネル       | 出力| 同行する他社スタッフ情報を表示       |
| 常駐スタッフ情報| 情報パネル       | 出力| 常駐スタッフの情報を表示             |
| ターゲット情報 | 情報パネル       | 出力| 営業ターゲット・目標を表示           |
| コミュニケーション| チャット風パネル | 入出力| 管理者とのやり取りを表示・入力       |
| 閉じるボタン   | ボタン           | 入力| ドロワーを閉じる                     |

### イベント定義

| イベント名         | 発生タイミング | イベント概要               | 遷移先 | バリデーション |
|--------------------|---------------|----------------------------|--------|----------------|
| ドロワークローズ   | ボタン/背景押下| ドロワーを閉じる           | なし   | なし           |
| コメント送信       | 送信ボタン押下 | コメントを送信             | なし   | 文字数制限     |

---

## 2-4. ステータス表示・色分けシステム

![image.png](image%204.png)

### UI 要素・コントロール・I/O

| 要素名         | コントロール種類 | I/O | 説明                                 |
|----------------|------------------|-----|--------------------------------------|
| 希望ステータス色分け| カラー表示     | 出力| ○（緑#2e7d32）、×（赤#d32f2f）、△（薄黄#b8860b）|
| 確定ステータスチップ| チップ        | 出力| 確定（成功色）、現場未確定（黄#C3AF45）、詳細未確定（情報色）、休み（エラー色）|
| カード背景色   | 背景色           | 出力| 確定・稼働確約（薄緑#e7f5e0）、休み（薄グレー#f5f5f5）、その他（白#ffffff）|
| ボーダー       | ボーダー         | 出力| 確定時は緑ボーダー（2px solid #4caf50）、その他は薄グレー（1px solid #e0e0e0）|

### イベント定義

| イベント名         | 発生タイミング | イベント概要               | 遷移先 | バリデーション |
|--------------------|---------------|----------------------------|--------|----------------|
| ステータス表示     | 画面表示時     | ステータスの自動判定・色分け表示 | なし   | なし           |

---

## 2-5. 備考・ステータス説明

![image.png](image%205.png)

### UI 要素・コントロール・I/O

| 要素名         | コントロール種類 | I/O | 説明                                 |
|----------------|------------------|-----|--------------------------------------|
| 備考タイトル   | テキスト表示     | 出力| 「備考」タイトル表示                 |
| ステータス説明チップ| チップ        | 出力| 各ステータスのサンプルチップ表示     |
| 説明テキスト   | テキスト表示     | 出力| 各ステータスの詳細説明               |
| 背景色説明     | テキスト表示     | 出力| 「背景色が緑のカードは稼働確約日」の説明|

### イベント定義

| イベント名         | 発生タイミング | イベント概要               | 遷移先 | バリデーション |
|--------------------|---------------|----------------------------|--------|----------------|
| ステータス説明表示 | 画面表示時     | ステータス説明の表示       | なし   | なし           |

---

## 2-6. データ生成・管理システム

![image.png](image%206.png)

### UI 要素・コントロール・I/O

| 要素名         | コントロール種類 | I/O | 説明                                 |
|----------------|------------------|-----|--------------------------------------|
| データローダー | システム処理     | 処理| ダミーデータの動的生成               |
| 認証チェック   | システム処理     | 処理| スタッフ認証状態の確認               |
| 月次データ管理 | システム処理     | 処理| 月別シフトデータの管理               |

### イベント定義

| イベント名         | 発生タイミング | イベント概要               | 遷移先 | バリデーション |
|--------------------|---------------|----------------------------|--------|----------------|
| データ生成         | 画面表示時     | 確定シフトデータの生成     | なし   | なし           |
| 認証確認           | 画面表示時     | ログイン状態の確認         | /staff/login | 認証必須 |

---

# 3. その他仕様（要素に収まらない共通ルールや制約）

## 3-1. 認証・セキュリティ

- **認証管理**: スタッフログイン必須、セッション管理
- **LocalStorage管理**: `staff_logged_in`、`user_id`、`user_name`による認証状態管理
- **他スタッフ情報の非表示**: 自身の稼働情報のみ表示

## 3-2. カード形式UI・レイアウト

- **カード構成**: 
  - 左セクション（40%）: 日付・曜日、希望記号、ステータスチップ
  - 右セクション（60%）: 稼働場所、稼働時間、詳細案内
- **レスポンシブ対応**: 
  - デスクトップ: カード形式表示（mb: 1のマージン）
  - タブレット・スマホ: 縦並びカード表示（同様のレイアウト維持）
- **インタラクション**: 
  - 確定ステータスのみクリック可能・ホバー効果あり
  - ホバー時: 影強化（0 4px 12px rgba(0,0,0,0.1)）・上移動（translateY(-2px)）
  - その他ステータス: クリック不可・ホバー効果なし

## 3-3. ステータス管理・色分け

- **希望ステータス**: 
  - ○（稼働希望）: 緑色（#2e7d32）
  - ×（稼働不可）: 赤色（#d32f2f）
  - △（未定）: 薄黄色（#b8860b）
- **確定ステータス**: 
  - 確定: 成功色（緑系）チップ
  - 現場未確定: 黄色（#C3AF45）チップ
  - 詳細未確定: 情報色（青系）チップ
  - 休み: エラー色（赤系）チップ
- **背景色ロジック**: 
  - 確定: 薄緑（#e7f5e0）
  - 休み: 薄グレー（#f5f5f5）
  - 稼働確約日（15日以降の特定日）: 薄緑（#e7f5e0）
  - その他: 白（#ffffff）

## 3-4. 稼働確約日ロジック

- **確約日判定**: 月の後半（15日以降）で `day % 4 === 0` または `day === 18` または `day === 25`
- **視覚的表現**: 薄緑の背景色で「稼働が確約されている日」を表現
- **備考での説明**: 画面下部の備考セクションで背景色の意味を説明

## 3-5. ダミーデータ生成・管理

- **決定論的生成**: staffIdと日付に基づく疑似ランダム生成（seedRandom関数）
- **希望配分**: ○を22日分、残りを×で配分（月日数に応じて調整）
- **稼働場所**: LOCATIONS配列からエリア名をローテーション選択
- **稼働時間**: 平日11:00-19:00、土日10:00-18:00
- **日当**: weekdayRate/holidayRateに基づく設定

## 3-6. 表示項目・詳細情報

- **稼働場所表示**: 「▶ エリア名」形式で表示
- **稼働時間表示**: 「時間: 開始時間-終了時間」形式（詳細未確定時は非表示）
- **詳細案内**: 確定ステータス時のみ「＞詳細」を表示
- **お休み表示**: 稼働なしの日は「お休み」テキストを表示

## 3-7. UI/UX・パフォーマンス

- **アクセシビリティ**: 
  - WCAG 2.2 AA 準拠
  - キーボード操作完全対応
  - コントラスト4.5:1以上
  - スクリーンリーダー対応
- **パフォーマンス**: 
  - 効率的なダミーデータ生成
  - useMemoによる最適化・計算結果キャッシュ
  - 最小限のAPI通信（現在はダミーデータのみ）

## 3-8. 変更点・廃止項目

- **画面下部のログアウトボタンは廃止**: ヘッダーのログアウト機能のみ利用
- **テーブル形式からカード形式に変更**: より見やすいカード形式のUI採用
- **ログアウト確認ダイアログ**: 中央揃え・横幅いっぱい・ボタン中央揃えの確認ダイアログ実装

## 3-9. 制約・注意事項

- **現在はダミーデータによる表示**: 実際のAPI連携は未実装
- **リアルタイム更新機能は未実装**: 画面更新時にデータ再生成
- **決定論的データ**: 同じ年月・スタッフIDでは常に同じデータを生成
- **WorkDetailDrawer**: 右スライドイン・幅900px・編集モード切替対応 