# 1. 画面名

**スタッフダッシュボード（シフトホーム）**

![image.png](image.png)

---

# 2. 要素別仕様

---

## 2-1. StaffHeader（スタッフヘッダー）

![image.png](image%201.png)

### UI 要素・コントロール・I/O

| 要素名         | コントロール種類 | I/O | 説明                                 |
|----------------|------------------|-----|--------------------------------------|
| タイトル表示   | テキスト表示     | 出力| 「シフトホーム」を表示               |
| ダッシュボードボタン| ボタン/アイコンボタン | 入力| ダッシュボード画面へ遷移（現在画面のためハイライト） |
| 役職チップ     | チップ           | 出力| 「スタッフ」を表示（デスクトップのみ）|
| スタッフ名表示 | テキスト表示     | 出力| ログイン中のスタッフ名を表示（常時表示。スマホ・タブレットでも省略表示で表示される） |
| ログアウトボタン| ボタン/アイコンボタン | 入力| ログアウト処理（押下時に確認ダイアログ表示。「このアカウントからログアウトしますか？」と中央揃え・横幅いっぱいのダイアログで確認。キャンセル・ログアウトの2ボタンも中央揃え） |

### イベント定義

| イベント名         | 発生タイミング | イベント概要               | 遷移先 | バリデーション |
|--------------------|---------------|----------------------------|--------|----------------|
| ダッシュボード遷移 | ボタン押下時   | ダッシュボード画面へ遷移   | /tier-2dealer/staff/dashboard | なし |
| ログアウト実行     | ボタン押下時   | ログアウト確認ダイアログ表示→OK時にLocalStorage削除・ログアウト | /tier-2dealer/staff/login | なし |

---

## 2-2. WorkDetailCard（稼働情報カード）

![image.png](image%202.png)

### UI 要素・コントロール・I/O

| 要素名         | コントロール種類 | I/O | 説明                                 |
|----------------|------------------|-----|--------------------------------------|
| カードタイトル | テキスト表示     | 出力| 「今日の稼働」「明日の稼働」を表示   |
| 今日の稼働カード| カード           | 出力| 本日の稼働情報を表示                 |
| 明日の稼働カード| カード           | 出力| 明日の稼働情報を表示                 |
| 日付・曜日表示 | テキスト表示     | 出力| 「○月○日(○)」形式で表示             |
| 稼働ステータス | チップ           | 出力| 確定（成功色）/現場未定（黄色）/詳細未定（情報色）/休み（エラー色） |
| 勤務場所       | テキスト表示     | 出力| 確定時の稼働場所を表示（「勤務場所：」ラベル付き） |
| 勤務時間       | テキスト表示     | 出力| 開始・終了時間を表示（「勤務時間：」ラベル付き） |
| 集合情報       | テキスト表示     | 出力| 集合時間・場所を表示（「集合：」ラベル付き） |
| 詳細タップ案内 | テキスト表示     | 出力| 「詳細 タップ」の案内表示（確定時のみ） |
| カードホバー効果| インタラクション | 出力| ホバー時の影・移動アニメーション     |

### イベント定義

| イベント名         | 発生タイミング | イベント概要               | 遷移先 | バリデーション |
|--------------------|---------------|----------------------------|--------|----------------|
| 稼働詳細表示       | カードクリック時| 稼働詳細ドロワー表示（確定時のみクリック可能） | WorkDetailDrawer表示 | ステータスが「確定」のみ |

---

## 2-3. WorkDetailDrawer（稼働詳細ドロワー）

![image.png](image%203.png)

### UI 要素・コントロール・I/O

| 要素名         | コントロール種類 | I/O | 説明                                 |
|----------------|------------------|-----|--------------------------------------|
| ドロワーヘッダー| ヘッダー         | 出力| 稼働日・曜日を表示（○月○日(○)形式） |
| 閉じるボタン   | アイコンボタン   | 入力| ドロワーを閉じる（×アイコン）        |
| ステータス表示 | チップ           | 出力| 確定/現場未確定/休み等のステータス   |
| 代理店情報パネル| 情報パネル      | 出力| 代理店名・管理者・連絡先を表示       |
| 稼働場所情報パネル| 情報パネル     | 出力| 稼働場所・集合時間・集合場所・勤務時間を表示 |
| 服装・注意事項パネル| 情報パネル   | 出力| 制服・服装・特記事項・目標を表示     |
| 現場詳細情報パネル| 情報パネル     | 出力| 現場連絡先・他社スタッフ・レギュラースタッフを表示 |
| スタッフ配置表 | テーブル         | 出力| 複数日程のスタッフ配置を表示         |
| 編集モード切替 | ボタン           | 入力| 詳細情報の編集モード切り替え         |
| コミュニケーションパネル| チャット風パネル | 入出力| 管理者とのやり取りを表示・入力・返信・いいね |

### イベント定義

| イベント名         | 発生タイミング | イベント概要               | 遷移先 | バリデーション |
|--------------------|---------------|----------------------------|--------|----------------|
| ドロワークローズ   | 閉じるボタン/背景クリック | ドロワーを閉じる     | なし   | なし           |
| 編集モード切替     | 編集ボタン押下 | 詳細情報の編集可能状態切替 | なし   | なし           |
| 詳細情報更新       | 入力フィールド変更 | 稼働詳細情報の更新     | なし   | なし           |
| メッセージ送信     | 送信ボタン押下 | コメントを送信             | なし   | 文字数制限     |
| 返信送信           | 返信ボタン押下 | 返信メッセージを送信       | なし   | 文字数制限     |
| いいね切替         | いいねボタン押下| メッセージへのいいね切替   | なし   | なし           |
| メッセージ削除     | 削除ボタン押下 | メッセージの削除           | なし   | 確認ダイアログ |

---

## 2-4. ナビゲーションメニュー

![image.png](image%204.png)

### UI 要素・コントロール・I/O

| 要素名         | コントロール種類 | I/O | 説明                                 |
|----------------|------------------|-----|--------------------------------------|
| メニューセクション| ペーパー        | 出力| メニューのコンテナ                   |
| メニュータイトル| テキスト表示    | 出力| 「メニュー」を表示                   |
| シフト希望入力ボタン| ボタン        | 入力| シフト希望入力画面へ遷移（緑色）     |
| シフト希望入力説明| テキスト表示   | 出力| 「来月のシフト希望を入力」サブテキスト |
| シフト確認ボタン| ボタン          | 入力| シフト提出状況確認画面へ遷移（青色） |
| シフト確認説明 | テキスト表示     | 出力| 「確定したシフトを確認」サブテキスト |
| アイコン表示   | アイコン         | 出力| EditCalendar・CheckCircleアイコン    |

### イベント定義

| イベント名         | 発生タイミング | イベント概要               | 遷移先                | バリデーション |
|--------------------|---------------|----------------------------|-----------------------|----------------|
| シフト希望入力遷移 | ボタン押下時   | シフト希望入力画面へ遷移   | /tier-2dealer/staff/input | なし           |
| シフト確認遷移     | ボタン押下時   | シフト提出状況確認画面へ遷移| /tier-2dealer/staff/check | なし           |

---

## 2-5. 稼働状況表示・通知システム

![image.png](image%205.png)

### UI 要素・コントロール・I/O

| 要素名         | コントロール種類 | I/O | 説明                                 |
|----------------|------------------|-----|--------------------------------------|
| ステータスチップ| チップ          | 出力| 稼働状況に応じた色・テキスト表示     |
| ステータスアイコン| アイコン        | 出力| WorkOutline・LocationOn・Schedule・Cancelアイコン |
| 確定ステータス | 成功色チップ     | 出力| 緑系色「確定」表示                   |
| 現場未定ステータス| 黄色チップ      | 出力| 黄色「現場未定」表示                 |
| 詳細未定ステータス| 情報色チップ    | 出力| 青系色「詳細未定」表示               |
| 休みステータス | エラー色チップ   | 出力| 赤系色「休み」表示                   |
| 重要お知らせAlert| Alert          | 出力| 稼働確定時の注意喚起メッセージ       |

### イベント定義

| イベント名         | 発生タイミング | イベント概要               | 遷移先 | バリデーション |
|--------------------|---------------|----------------------------|--------|----------------|
| ステータス自動判定 | 画面表示時・データ更新時 | 稼働状況の自動判定・表示 | なし | なし |
| 通知表示           | 確定稼働存在時 | 重要お知らせの条件付き表示 | なし | なし |

---

# 3. その他仕様（要素に収まらない共通ルールや制約）

## 3-1. 認証・セキュリティ

- **スタッフ認証**: LocalStorage（`staff_logged_in`・`current_staff_id`・`current_staff_name`）による認証
- **認証チェック**: 未ログイン時は自動的に`/tier-2dealer/staff/login`へリダイレクト
- **セッション管理**: ログアウト時にLocalStorageクリア
- **プライバシー保護**: 他スタッフ情報の非表示・自身の稼働情報のみ表示

## 3-2. データ管理・生成

- **ダミーデータ生成**: `generateWorkDetail`関数による決定論的疑似ランダム生成
- **稼働確率**: 70%の確率で稼働あり・30%で休み
- **確定確率**: 稼働ありの場合、80%で確定・20%で現場未確定
- **日付ベース生成**: 日付をシードとした一貫性のあるデータ生成
- **勤務時間**: 平日11:00-19:00・土日10:00-18:00
- **日当**: 平日¥15,000・土日¥18,000
- **集合時間**: 勤務開始30分前
- **代理店**: ピーアップ・株式会社イベントプロ・株式会社マーケティングラボ

## 3-3. ステータス管理・表示

- **確定**: 成功色（緑系）・WorkOutlineアイコン・稼働場所・時間確定済み
- **現場未定**: 黄色（#C3AF45）・LocationOnアイコン・稼働予定だが場所未確定
- **詳細未定**: 情報色（青系）・Scheduleアイコン・稼働予定だが詳細未確定
- **休み**: エラー色（赤系）・Cancelアイコン・稼働なし
- **ステータス連動**: カードクリック可能性・詳細表示項目・ホバー効果

## 3-4. UI/UX・レスポンシブ

- **レスポンシブ対応**: 
  - デスクトップ（md以上）: 2カラム表示（今日・明日並列）
  - タブレット・スマホ（sm以下）: 1カラム表示（縦並び）
- **StaffHeader**: モバイル対応（ユーザー名・役職名も省略表示で常時表示。ログアウト時は中央揃え・横幅いっぱいの確認ダイアログ）
- **カードインタラクション**: 
  - ホバー効果（影・2px上移動）
  - クリック可能は確定ステータスのみ
  - 高さ自動調整（fit-content）
- **WorkDetailDrawer**: 右スライドイン・幅900px・編集モード切替

## 3-5. コミュニケーション機能

- **CommunicationPanel**: チャット風インタフェース
- **メッセージ機能**: 送信・返信・いいね・削除
- **データ構造**: Communication型（ID・ユーザー・メッセージ・タイムスタンプ・いいね・返信）
- **リアルタイム更新**: 未実装（現在は状態管理のみ）
- **ファイル添付**: 未対応

## 3-6. パフォーマンス・アクセシビリティ

- **軽量データ生成**: useMemoによる最適化・計算結果キャッシュ
- **効率的状態管理**: 最小限の再レンダリング
- **アクセシビリティ**: 
  - WCAG 2.2 AA 準拠
  - キーボード操作完全対応
  - コントラスト4.5:1以上
  - スクリーンリーダー対応（aria-label等）

## 3-7. 制約・注意事項

- **ダミーデータ**: 現在はダミーデータによる表示のみ
- **API連携**: 実際のAPI連携は未実装
- **リアルタイム更新**: リアルタイム更新機能は未実装
- **データ永続化**: LocalStorageのみ・サーバー同期なし
- **ブラウザ依存**: LocalStorageサポートブラウザのみ対応
- **開発段階**: プロトタイプ段階・本格運用時は要API実装 